---
name: ship
description: Commit, push, and create PR in one command
---

# /ship Command

One-shot: verify → commit → push → create PR.

## Usage

```
/ship                      # Ship all changes
/ship "feat: add dark mode" # Ship with custom commit message
/ship --draft              # Create draft PR
```

## Workflow

### Step 1: Pre-flight Verification

Runs `verify-before-commit` skill:
- `lsp_diagnostics` on all changed files
- Confirm tests were run
- Check TODO completion
- Run formatter if configured

**If verification fails → STOP and report issues**

### Step 2: Stage Changes

```bash
git add -A
```

### Step 3: Commit

If message provided:
```bash
git commit -m "<user message>"
```

If no message, generate conventional commit:
```bash
git commit -m "feat: <auto-generated summary>"
```

### Step 4: Push

```bash
git push -u origin HEAD
```

### Step 5: Create PR

```bash
gh pr create --fill
# or with --draft flag
gh pr create --fill --draft
```

## Output

```markdown
## Ship Summary

### Verification
| Check | Status |
|-------|--------|
| Diagnostics | PASS |
| Tests | PASS |
| TODOs | PASS |

### Git Operations
- Committed: `abc1234` feat: add dark mode toggle
- Pushed to: origin/feature/dark-mode
- PR created: https://github.com/user/repo/pull/42

**Ship successful!**
```

## Failure Modes

| Issue | Behavior |
|-------|----------|
| Diagnostics errors | STOP, list errors |
| Tests not run | STOP, prompt to run tests |
| Push fails | Show error, suggest fix |
| PR creation fails | Show error, provide manual command |

## Prerequisites

- `gh` CLI installed and authenticated
- Git remote configured
- Branch not protected (or you have push access)

## Escape Hatch

If you need to bypass verification:
```
/ship --force
```

**Warning**: This skips pre-flight checks. Use sparingly.
